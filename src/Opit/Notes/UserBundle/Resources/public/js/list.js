// Generated by CoffeeScript 1.6.3
(function() {
  $("#add").click(function() {
    return $.ajax({
      method: 'POST',
      url: $(document).data('OpitNotesUserBundle').urls.OpitNotesUserBundle_user_show,
      data: {
        'edit': 0
      }
    }).done(function(data) {
      $('<div id="dialog-edititem"></div>').dialog({
        open: function() {
          $('.ui-dialog-title').append('<i class="fa fa-list-alt"></i> Create User');
          return $(this).html(data);
        },
        dialogClass: 'popup-dialog',
        width: 750,
        modal: true,
        buttons: {
          Create: function() {
            return $.ajax({
              type: 'POST',
              global: false,
              url: $(document).data('OpitNotesUserBundle').urls.OpitNotesUserBundle_user_add,
              data: $('#adduser_frm').serialize()
            }).done(function(data) {
              var response;
              response = data;
              return $.ajax({
                type: 'POST',
                global: false,
                url: $(document).data('OpitNotesUserBundle').urls.OpitNotesUserBundle_user_list,
                data: {
                  "showList": 1
                }
              }).done(function(data) {
                $('#list-table').html(data);
                $('<div id="dialog-success"></div>').dialog({
                  open: function() {
                    $('#dialog-success .ui-dialog-title').append('<i class="fa fa-check-square-o"></i> Message');
                    if (response[0].response === 'error') {
                      return $(this).html(response[0].errorMessage);
                    } else {
                      return $(this).html("Successfully added the new user!");
                    }
                  },
                  title: 'Message',
                  width: 400,
                  buttons: {
                    Close: function() {
                      $('#dialog-success').dialog("destroy");
                    }
                  },
                  close: function() {
                    $(this).dialog("destroy");
                  }
                });
                return;
                $('#dialog-edititem').dialog("destroy");
              });
            });
          },
          Close: function() {
            $('#dialog-edititem').dialog("destroy");
          }
        }
      });
      return;
    });
  });

  $("#list-table").on("click", ".list-username", function() {
    var id;
    event.preventDefault();
    id = $(this).attr("data-user-id");
    return $.ajax({
      method: 'POST',
      url: $(document).data('OpitNotesUserBundle').urls.OpitNotesUserBundle_user_show,
      data: {
        'edit': 1,
        'userId': id
      }
    }).done(function(data) {
      $('<div id="dialog-edititem"></div>').dialog({
        open: function() {
          $('.ui-dialog-title').append('<i class="fa fa-list-alt"></i> Edit User');
          return $(this).html(data);
        },
        dialogClass: 'popup-dialog',
        width: 750,
        modal: true,
        buttons: {
          Save: function() {
            return $.ajax({
              type: 'POST',
              global: false,
              url: $(document).data('OpitNotesUserBundle').urls.OpitNotesUserBundle_user_add,
              data: $('#adduser_frm').serialize()
            }).done(function(data) {
              var response;
              response = data;
              return $.ajax({
                type: 'POST',
                global: false,
                url: $(document).data('OpitNotesUserBundle').urls.OpitNotesUserBundle_user_list,
                data: {
                  "showList": 1
                }
              }).done(function(data) {
                $('#list-table').html(data);
                $('<div id="dialog-success"></div>').dialog({
                  open: function() {
                    $('#dialog-success .ui-dialog-title').append('<i class="fa fa-check-square-o"></i> Message');
                    if (response[0].response === 'error') {
                      return $(this).html(response[0].errorMessage);
                    } else {
                      return $(this).html("Successfully modified the user!");
                    }
                  },
                  title: 'Message',
                  width: 400,
                  buttons: {
                    Close: function() {
                      $('#dialog-success').dialog("destroy");
                    }
                  },
                  close: function() {
                    $(this).dialog("destroy");
                  }
                });
                return;
                $('#dialog-edititem').dialog("destroy");
              });
            });
          },
          Close: function() {
            $('#dialog-edititem').dialog("destroy");
          }
        }
      });
      return;
    });
  });

  $('#delete').click(function() {
    var users;
    users = [];
    $('.list-delete-user').each(function() {
      if (this.checked) {
        return users.push($(this).val());
      }
    });
    return $.ajax({
      type: 'POST',
      global: false,
      url: $(document).data('OpitNotesUserBundle').urls.OpitNotesUserBundle_user_delete,
      data: {
        "userIds": users
      }
    }).done(function(data) {
      var response;
      response = data;
      return $.ajax({
        type: 'POST',
        global: false,
        url: $(document).data('OpitNotesUserBundle').urls.OpitNotesUserBundle_user_list,
        data: {
          "showList": 1
        }
      }).done(function(data) {
        $('#list-table').html(data);
      });
    });
  });

}).call(this);
